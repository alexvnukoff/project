{% extends "AdminTpp/baseAdmin.html" %}
{% load staticfiles %}

{% block title %}Adveretisement prices{% endblock %}

{% block style %}
    {{ block.super }}
    <!-- DATA TABLES -->
    <link href="{% static "admin-tpp/css/datatables/dataTables.bootstrap.css" %}" rel="stylesheet" type="text/css" />
{% endblock %}


{% block content %}
    <div class="row">
                        <div class="col-xs-12">
                            <div class="box">
                                <div class="box-header">
                                    <h3 class="box-title">Countries</h3>
                                </div><!-- /.box-header -->
                                <div class="box-body table-responsive">
                                    <table id="country" class="table table-bordered table-striped">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td colspan="5" class="dataTables_empty">Loading data from server</td>
                                            </tr>
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <th>Name</th>
                                                <th>Action</th>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div><!-- /.box-body -->
                            </div><!-- /.box -->
                        </div>
                    </div>
<div class="row">
                        <div class="col-xs-12">
                            <div class="box">
                                <div class="box-header">
                                    <h3 class="box-title">Organizations</h3>
                                </div><!-- /.box-header -->
                                <div class="box-body table-responsive">
                                    <table id="tpp" class="table table-bordered table-striped">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td colspan="5" class="dataTables_empty">Loading data from server</td>
                                            </tr>
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <th>Name</th>
                                                <th>Action</th>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div><!-- /.box-body -->
                            </div><!-- /.box -->
                        </div>
                    </div>
<div class="row">
                        <div class="col-xs-12">
                            <div class="box">
                                <div class="box-header">
                                    <h3 class="box-title">Branches</h3>
                                </div><!-- /.box-header -->
                                <div class="box-body table-responsive">
                                    <table id="branch" class="table table-bordered table-striped">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td colspan="3" class="dataTables_empty">Loading data from server</td>
                                            </tr>
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <th>Name</th>
                                                <th>Action</th>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div><!-- /.box-body -->
                            </div><!-- /.box -->
                        </div>
                    </div>
<div class="row">
                        <div class="col-xs-12">
                            <div class="box">
                                <div class="box-header">
                                    <h3 class="box-title">Category</h3>
                                </div><!-- /.box-header -->
                                <div class="box-body table-responsive">
                                    <table id="category" class="table table-bordered table-striped">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td colspan="3" class="dataTables_empty">Loading data from server</td>
                                            </tr>
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <th>Name</th>
                                                <th>Action</th>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div><!-- /.box-body -->
                            </div><!-- /.box -->
                        </div>
                    </div>

        <!-- Bootstrap -->

        <!-- DATA TABES SCRIPT -->

        <!-- AdminLTE App -->


        <!-- page script -->

{% endblock %}

{% block bottomScript %}
    {{ block.super }}
    <script src="{% static "admin-tpp/js/bootstrap.min.js" %}" type="text/javascript"></script>
    <script src="{% static "admin-tpp/js/plugins/datatables/jquery.dataTables.js" %}" type="text/javascript"></script>
    <script src="{% static "admin-tpp/js/plugins/datatables/dataTables.bootstrap.js" %}" type="text/javascript"></script>
    <script src="{% static "admin-tpp/js/AdminLTE/app.js" %}" type="text/javascript"></script>
    <script type="text/javascript">
        $(function() {
            $(document).on("click", ".savePrice", function() {
                var name = $(this).parents('tr').find('input').val();
                var id = $(this).data('pk');
                var button = $(this);
                $(this).addClass("disabled");

                $.post("{% url "AdminTpp:dashboard" %}", {'id': id, 'name': name}, function() {
                    button.removeClass('disabled');
                });

            });

            $('#country').dataTable( {
                "bProcessing": true,
                "bServerSide": true,
                "sAjaxSource": "{% url "AdminTpp:load_country" %}",
                "aoColumnDefs": [
                    { 'bSortable': false, 'aTargets': [ 0, 1 ] },
                    {
                                "aTargets": [ 0 ],
                                "mData": 0,
                                "mRender": function ( data, type, full ) {

                                    return '<div class="input-group"><span class="input-group-addon"></span>' +
                                            '<input value="' + data + '" type="text" class="form-control"></div>';

                                }
                    },
                    {
                        "aTargets": [ 1 ],
                        "mData": 1,
                        "mRender": function ( data, type, full ) {

                            return '<button data-pk="' + data + '" class="savePrice btn btn-success">Save</button>';
                        }
                    }
               ]
            });
           $('#tpp').dataTable( {
                "bProcessing": true,
                "bServerSide": true,
                "sAjaxSource": "{% url "AdminTpp:load_tpp" %}",
                "aoColumnDefs": [
                    { 'bSortable': false, 'aTargets': [ 0, 1] },
                    {
                                "aTargets": [ 0 ],
                                "mData": 0,
                                "mRender": function ( data, type, full ) {

                                    return '<div class="input-group"><span class="input-group-addon"></span>' +
                                            '<input value="' + data + '" type="text" class="form-control"></div>';

                                }
                    },
                    {
                        "aTargets": [ 1 ],
                        "mData": 1,
                        "mRender": function ( data, type, full ) {

                            return '<button data-pk="' + data + '" class="savePrice btn btn-success">Save</button>';
                        }
                    }
               ]
            });
            $('#branch').dataTable( {
                "bProcessing": true,
                "bServerSide": true,
                "sAjaxSource": "{% url "AdminTpp:load_branch" %}",
                "aoColumnDefs": [
                    { 'bSortable': false, 'aTargets': [ 0, 1] },
                    {
                                "aTargets": [ 0 ],
                                "mData": 0,
                                "mRender": function ( data, type, full ) {

                                    return '<div class="input-group"><span class="input-group-addon"></span>' +
                                            '<input value="' + data + '" type="text" class="form-control"></div>';

                                }
                    },
                    {
                        "aTargets": [ 1 ],
                        "mData": 1,
                        "mRender": function ( data, type, full ) {

                            return '<button data-pk="' + data + '" class="savePrice btn btn-success">Save</button>';
                        }
                    }
               ]
            });

           $('#category').dataTable( {
                "bProcessing": true,
                "bServerSide": true,
                "sAjaxSource": "{% url "AdminTpp:load_category" %}",
                "aoColumnDefs": [
                    { 'bSortable': false, 'aTargets': [ 0, 1] },
                    {
                                "aTargets": [ 0 ],
                                "mData": 0,
                                "mRender": function ( data, type, full ) {

                                    return '<div class="input-group"><span class="input-group-addon"></span>' +
                                            '<input value="' + data + '" type="text" class="form-control"></div>';

                                }
                    },
                    {
                        "aTargets": [ 1 ],
                        "mData": 1,
                        "mRender": function ( data, type, full ) {

                            return '<button data-pk="' + data + '" class="savePrice btn btn-success">Save</button>';
                        }
                    }
               ]
            });
        });

    </script>
{% endblock %}