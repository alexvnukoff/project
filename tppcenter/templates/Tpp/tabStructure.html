{% load i18n %}
{% load staticfiles %}
{% load CustomFilters %}

<script>
        $(function(){
            companyStructure.init('{% url "tpp:tab_structure" item_pk %}', LANG['structure']);
        });
</script>

<div class="tpp-dt-content">
    <div class="content-staff">
        <div class="content-staffin">
            {% if departments|length > 0 %}
                <ul class="sitemap department">
                    {% for id, department in departments.items %}
                        <li data-item-id="{{ id }}">
                            <a href="#" title="{{ department.text }}">{{ department.text }}</a>
                            <ul class="sub vacancy">
                                {% for vacancy in department.vacancyList %}
                                    <li  data-item-id="{{ vacancy.pk }}"><span>{{ vacancy.text }}</span></li>
                                {% endfor %}
                            </ul>
                        </li>
                    {% empty %}
                        <div class="no-results">{% trans "No Departments found." %}</div>
                    {% endfor %}
                </ul>
            {% else %}
                <div class="no-results">{% trans "No Departments found." %}</div>
            {% endif %}
            <!-- right buttons menu -->
            <div class="btn-clumn">
                {% if 'add_department' in permissionsList %}
                    <i class="btnadd btnaction imgnews addform department" id="add-button"></i>
                {% endif %}
                {% if 'change_department' in permissionsList %}
                    <i class="btnedit btnaction imgnews panel" style="display: none;" id="edit-button"></i>
                {% endif %}
                {% if 'delete_department' in permissionsList %}
                    <i class="btnremove btnaction imgnews panel" style="display: none;" id="remove-button"></i>
                {% endif %}
            </div>
        </div>
    </div>
    {% include "main/paginator.html" %}
</div>